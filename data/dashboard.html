<!doctype html><html lang="en"><head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/edunwant42/Asset42Archive/refs/heads/main/SAI42/assets/logo/SAI42x128.ico" sizes="128x128" /> <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet"> <script src="https://code.highcharts.com/highcharts.js"></script> <style> @import url("https://fonts.googleapis.com/css2?family=Gugi&display=swap"); * { box-sizing: border-box; margin: 0; padding: 0; } html, body { width: 100%; height: 100%; font-family: 'Gugi', sans-serif; background: #f9f9f9; color: #333; overflow-x: hidden; } .navbar { position: fixed; top: 0; width: 100%; height: 64px; background: #fff; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); z-index: 1100; } .nav-container { max-width: 1200px; height: 100%; margin: 0 auto; padding: 0 2rem; display: flex; justify-content: space-between; align-items: center; } .logo-text { display: flex; align-items: center; font-size: 1.8rem; color: #343a40; gap: 0.5rem; text-decoration: none; } .logo-text span { color: #3bb615; } .nav-logout { text-decoration: none; font-size: 1rem; color: #dc3545; transition: color .3s; } .nav-logout:hover { color: #c82333; } .main-wrapper { display: flex; flex-direction: column; align-items: center; margin-top: 64px; padding: 1rem; } .content-wrapper { width: 100%; max-width: 900px; margin: 0 auto; } .status-card { background: #fff; border-radius: 12px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); padding: 1.5rem; margin-bottom: 1.5rem; } .cntnr-title { font-size: 1.4rem; color: #343a40; text-align: center; margin-bottom: 1.5rem; } .status-cntnr { display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; gap: 2rem; } .plant-info { display: flex; flex-direction: column; align-items: center; } .plant-info img { width: 200px; border-radius: 10px; filter: drop-shadow(0 0 20px #999); transition: filter .5s, transform .3s; } .badge { display: inline-block; margin-top: 1rem; padding: .5rem 1.25rem; font-weight: bold; color: #fff; background: #6c757d; border-radius: 20px; filter: drop-shadow(0 0 10px #6c757d); transition: transform .2s; } .badge:hover { transform: scale(1.05); } .info-block { display: flex; flex-direction: column; gap: 1rem; width: 32%; min-width: 280px; position: relative; } .info-item { font-size: 1.1rem; display: flex; justify-content: space-between; align-items: center; transition: transform .2s; } .info-item:hover { transform: scale(1.05); } .info-left { display: flex; align-items: center; gap: .5rem; } .info-left i { font-size: 1.3rem; width: 25px; text-align: center; } .snsr-value { font-weight: bold; } .temp-icn, .temp-spn { color: #F7263B; } .humd-icn, .humd-spn { color: #61B8E4; } .wthr-icn, .wthr-spn { color: #AA64EB; } .mstr-icn, .mstr-spn { color: #7DA417; } .ligt-icn, .ligt-spn { color: #F5BA0D; } .watr-icn, .watr-spn { color: #6585a0; } .water-btn { padding: .75rem 1.75rem; border: none; border-radius: 8px; font-family: Gugi; letter-spacing: .9px; font-size: 1.1rem; font-weight: 600; cursor: pointer; background: #61B8E4; color: #fff; box-shadow: 0 4px 10px rgba(97, 184, 228, .4); transition: transform .2s, box-shadow .3s; margin: 1.5rem auto 0; } .water-btn:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 6px 15px rgba(97, 184, 228, .5); } .water-btn:disabled { background: #ccc; cursor: not-allowed; box-shadow: none; } .chart-container { background: #fff; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }#sensors-chart { width: 100%; height: 350px; } .loading-overlay { position: fixed; inset: 0; background: rgba(255, 255, 255, 1); z-index: 1200; transition: opacity .3s; } .loading-container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); display: flex; flex-direction: column; align-items: center; } .loading-spinner { width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #61B8E4; border-radius: 50%; animation: spin 1s linear infinite; } .loading-text { margin-top: 15px; font-size: 1.2rem; color: #61B8E4; letter-spacing: 1px; animation: pulse 1.5s infinite; } @keyframes spin { to { transform: rotate(360deg); } } @keyframes pulse { 0%, 100% { opacity: .6; } 50% { opacity: 1; } } @media (max-width: 768px) { .info-block { width: 100%; } } </style> <title>SAI42 | Dashboard</title></head><body> <nav class="navbar"> <div class="nav-container"> <a href="#" class="logo-text">SAI<span>42</span></a> <h1>Dashboard</h1> <a href="/login?action=logout" class="nav-logout"><i class="fas fa-power-off"></i> Logout</a> </div> </nav> <div class="loading-overlay" id="loadingOverlay"> <div class="loading-container"> <div class="loading-spinner"></div> <div class="loading-text">Loading...</div> </div> </div> <div class="main-wrapper"> <div class="content-wrapper"> <div class="status-card"> <h1 class="cntnr-title">Plant Status</h1> <div class="status-cntnr"> <div class="plant-info"> <img src="https://raw.githubusercontent.com/edunwant42/Asset42Archive/refs/heads/main/SAI42/assets/images/plant%203.webp" alt="Plant" id="plantImage"> <span id="plantStatusBadge" class="badge">--</span> </div> <div class="info-block"> <div class="info-item"> <div class="info-left"><i class="fas fa-thermometer-half temp-icn"></i><span>Temperature:</span></div> <span class="snsr-value temp-spn" id="temperatureValue">-- °C</span> </div> <div class="info-item"> <div class="info-left"><i class="fas fa-tint humd-icn"></i><span>Humidity:</span></div> <span class="snsr-value humd-spn" id="humidityValue">-- %</span> </div> <div class="info-item"> <div class="info-left"><i class="fa-solid fa-cloud-rain wthr-icn"></i><span>Weather:</span></div> <span class="snsr-value wthr-spn" id="weatherValue">--</span> </div> <div class="info-item"> <div class="info-left"><i class="fas fa-lightbulb ligt-icn"></i><span>Brightness:</span></div> <span class="snsr-value ligt-spn" id="lightingValue">--</span> </div> <div class="info-item"> <div class="info-left"><i class="fa-solid fa-seedling mstr-icn"></i><span>Soil Moisture:</span></div> <span class="snsr-value mstr-spn" id="moistureValue">-- %</span> </div> <div class="info-item"> <div class="info-left"><i class="fas fa-faucet watr-icn"></i><span>Pump Status:</span></div> <span class="snsr-value watr-spn" id="wateringValue">--</span> </div> <button class="water-btn" id="waterButton"><i class="fas fa-tint"></i> Water Plant</button> </div> </div> </div> <div class="chart-container"> <h1 class="cntnr-title">Sensor Data History</h1> <div id="sensors-chart"></div> </div> </div> </div> <script> const API_KEY = "<-- API_KEY_PLACEHOLDER -->"; let latestSensorData = null; let chartDataInitialized = false; const chartH = Highcharts.chart('sensors-chart', { chart: { type: 'areaspline', animation: Highcharts.svg }, title: { text: '' }, xAxis: { type: 'datetime', tickPixelInterval: 150 }, yAxis: [ { title: { text: '' }, tickPositions: [0, 25, 50, 75, 100], labels: { style: { color: 'rgb(100,149,237)', fontWeight: 'bold' } } }, { title: { text: '' }, tickPositions: [0, 10, 20, 30, 40], opposite: true, labels: { style: { color: 'rgb(247,38,59)', fontWeight: 'bold' } } } ], plotOptions: { spline: { lineWidth: 2, marker: { enabled: true } } }, series: [ { name: 'Moisture', data: [], yAxis: 0, color: 'rgb(100,149,237)', fillColor: 'rgba(100,149,237,0.2)' }, { name: 'Temperature', data: [], yAxis: 1, color: 'rgba(247,38,59,0.2)' } ], credits: { enabled: false } }); const ws = new WebSocket('ws://' + location.hostname + '/ws'); ws.onopen = () => console.log('WebSocket open'); ws.onerror = e => console.error('WebSocket error', e); ws.onmessage = e => { try { const d = JSON.parse(e.data); latestSensorData = d;  if (d.temperature >= 0) document.getElementById('temperatureValue').textContent = `${d.temperature} °C`; if (d.humidity >= 0) document.getElementById('humidityValue').textContent = `${d.humidity} %`; if (d.moisture >= 0) document.getElementById('moistureValue').textContent = `${d.moisture} %`; if (d.lighting) document.getElementById('lightingValue').textContent = d.lighting; if (d.weather) document.getElementById('weatherValue').textContent = d.weather; const btn = document.getElementById('waterButton'); const span = document.getElementById('wateringValue'); const isOver = (d.plantStatus || '').toLowerCase() === 'overwatered';  if (d.pumpStatus === 'ON') { span.textContent = 'ON'; btn.innerHTML = `<i class="fas fa-tint"></i> Watering${d.countdown > 0 ? ` (${d.countdown})` : ''}`; btn.disabled = true; } else if (isOver) { btn.innerHTML = `<i class="fas fa-tint"></i> Water Plant`; btn.disabled = true; span.textContent = 'OFF'; } else { span.textContent = 'OFF'; btn.innerHTML = `<i class="fas fa-tint"></i> Water Plant`; btn.disabled = false; }  const badge = document.getElementById('plantStatusBadge'); badge.textContent = d.plantStatus; let statusColor = '#999'; switch ((d.plantStatus || '').toLowerCase()) { case 'overwatered': statusColor = '#61B8E4'; break; case 'healthy': statusColor = '#7DA417'; break; case 'thirsty': statusColor = '#F5BA0D'; break; case 'dry': statusColor = '#F7263B'; break; } badge.style.backgroundColor = statusColor; badge.style.filter = `drop-shadow(0 0 20px ${statusColor})`; document.getElementById('plantImage').style.filter = `drop-shadow(0 0 20px ${statusColor})`; if (!chartDataInitialized) { loadChartData(); chartDataInitialized = true; } } catch (err) { console.error('WS parse error', err); } }; function loadChartData() { if (!latestSensorData) return; const now = Date.now(); const m = parseFloat(latestSensorData.moisture) || 0; const t = parseFloat(latestSensorData.temperature) || 0; chartH.series[0].addPoint([now, m], true, chartH.series[0].data.length >= 7); chartH.series[1].addPoint([now, t], true, chartH.series[1].data.length >= 7); } async function waterPlant() { try { const res = await fetch(`/water?time=5&token=${API_KEY}`); if (!res.ok) throw new Error(res.statusText); document.getElementById('wateringValue').textContent = 'ON'; const btn = document.getElementById('waterButton'); btn.innerHTML = `<i class="fas fa-tint"></i> Watering`; btn.disabled = true; } catch (err) { console.error('Water API error', err); } }  document.getElementById('waterButton').addEventListener('click', waterPlant); setInterval(loadChartData, 10000); loadChartData();  document.addEventListener('DOMContentLoaded', () => { const overlay = document.getElementById('loadingOverlay'); const mainWrapper = document.querySelector('.main-wrapper'); mainWrapper.style.opacity = 0; setTimeout(() => { overlay.style.opacity = 0; setTimeout(() => { mainWrapper.style.opacity = 1; setTimeout(() => overlay.style.display = 'none', 300); }, 150); }, 1500); }); </script></body></html>